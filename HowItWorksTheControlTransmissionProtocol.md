# Java Remote Control - Control Transmission Protocol #


---

## Purpose of this Document ##
This document should give enough information for a developer to create an application that can transmit and/or receive control information as generated by Java Remote Control. The control information includes mouse and keyboard actions that are intended to control a remote device such as a PC and information to control the capture of screen views.

It does not give the implementation of software to capture keyboard or mouse activity. Java Remote Control does this through libraries supplied with the JVM.


---

## Assumptions ##
Java Remote Control captures mouse and keyboard actions that are intended to control a device, such as a PC, remotely.

Currently all keyboard activity can be sent, but only mouse position and button clicks are sent. There is no support for multi-touch screens or a scroll wheel.


---

## The Protocol ##
You can see  a receiver implementation in Java [here](http://code.google.com/p/java-remote-control/source/browse/tags/release%202.2/Java%20Remote%20Control/org/one/stone/soup/remote/control/server/ControlConnection.java#51)


The protocol is based on XML formatted packets. Each packet is a self contained XML document. No document header or name space information is sent as the data is not intended for applications that do not know the protocol.

The protocol includes seven packet types:

  * nextFrame - this is sent as an empty XML element and tells the receiver that the application viewing the receivers screen is ready for the next frame. This stops captured frames buffering if the viewing application is displaying frames slower than they can be transmitted. e.g. 

&lt;nextFrame/&gt;


  * sendKeyFrame - this is sent as an empty XML element and tells the receiver to send a full frame of screen information including areas that have not changes since the last frame. e.g. 

&lt;sendKeyFrame/&gt;


  * keyPressed - this is sent as an empty XML element with an attribute code. The code attribute is the key code of the key to be pressed. e.g. 

&lt;keyPressed code=”13”/&gt;


  * keyReleased - this is sent as an empty XML element with an attribute code. The code attribute is the key code of the key to be released. e.g. 

&lt;keyPressed code=”13”/&gt;


  * mouseMoved -  this is sent as an empty XML element with two attributes, x and y. These are the coordinates that the mouse should be moved to, with x=0, y=0 being the top left of the screen. e.g. 

&lt;mouseMoved x=”123” y=”456”/&gt;


  * mousePressed - this is sent as an empty XML element with an attribute code. The code attribute is the button code of the mouse button to be pressed. e.g. 

&lt;mousePressed code=”1”/&gt;

 1=left button, 3=right button, 2=center button
  * mouseReleased - this is sent as an empty XML element with an attribute code. The code attribute is the button code of the mouse button to be released. e.g. 

&lt;mouseReleased code=”1”/&gt;

 1=left button, 3=right button, 2=center button


---

## Future Enhancement ##

As the control protocol is based on XML packets, the packets sent can be extended to include other information.

  * Data could be sent to and from the remote clipboard to implement clipboard sharing.
  * Data about the connection speed and screen view compression rate could also be shared.
  * A chat protocol could be implemented.



This document only covers communication from the controller. The transmission stream back to the controller is also available. Currently it only sends informational XML packets that can be ignored.